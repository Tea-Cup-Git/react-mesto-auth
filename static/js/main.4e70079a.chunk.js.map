{"version":3,"sources":["images/fail-icon.svg","images/success-icon.svg","images/logo.svg","contexts/CurrentUserContext.js","components/Card.js","components/Header.js","components/Footer.js","components/Main.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","index.js"],"names":["module","exports","CurrentUserContext","React","createContext","Card","_id","link","name","likes","owner","onCardClick","onCardLike","onCardDelete","card","currentUser","useContext","isLiked","some","i","cardLikeButtonClassName","isOwn","cardDeleteButtonClassName","id","className","src","alt","onClick","type","length","Header","headerName","headerUser","loggedIn","signOut","headerLogo","to","Footer","Main","cards","onEditAvatar","onEditProfile","onAddPlace","props","userData","avatar","about","map","key","ImagePopup","cardTitle","cardSrc","isOpen","onClose","api","baseUrl","token","this","_baseUrl","_token","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_handleResponse","method","body","JSON","stringify","cardID","like","PopupWithForm","title","onSubmit","buttonTitle","isLoading","noValidate","children","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","handleChange","e","target","value","useEffect","preventDefault","minLength","maxLength","pattern","placeholder","defaultValue","onChange","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","setTitle","setSrc","InfoTooltip","text","icon","Login","handleLogin","email","setEmail","password","setPassword","evt","console","log","Register","handleRegister","ProtectedRoute","Component","component","BASE_URL","getContent","data","App","history","useHistory","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","setLoggedIn","setUserData","isInfoTooltipOpen","setIsInfoTooltipOpen","InfoTooltipContents","setInfoTooltipContents","closeAllPopups","onInfoTooltip","all","getUserInfo","getInitialCards","dataUser","dataCards","catch","err","error","localStorage","getItem","auth","push","message","FailIcon","tokenCheck","Provider","exact","path","changeLikeCardStatus","newCard","newCards","c","removeCard","filter","removeItem","statusText","escape","SuccessIcon","setItem","setUserInfo","addCard","setUserAvatar","dataAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4e70079a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/fail-icon.4072126c.svg\";","module.exports = __webpack_public_path__ + \"static/media/success-icon.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Card({ _id, link, name, likes, owner, onCardClick, onCardLike, onCardDelete }) {\n  const card = { _id: _id, link: link, name: name, owner: owner, likes: likes };\n  const currentUser = React.useContext(CurrentUserContext);\n  const isLiked = likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = (\n    `card__like-button ${isLiked ? 'card__like-button_active' : ''}`\n  );\n  const isOwn = owner._id === currentUser._id;\n  const cardDeleteButtonClassName = (\n    `card__trash-button ${isOwn ? '' : 'card__trash-button_hidden'}`\n  );\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleCardLike() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card)\n  }\n\n  return (\n    <div id=\"card-template\">\n      <div className=\"card\">\n        <img className=\"card__image\" src={link} alt={name} onClick={handleClick} />\n        <p className=\"card__name\">{name}</p>\n        <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteClick} />\n        <div className=\"card__likes\">\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={handleCardLike} />\n          <p className=\"card__like-count\">{likes.length}</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport headerLogo from '../images/logo.svg';\n\nfunction Header({ headerName, headerUser, loggedIn, signOut }) {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={headerLogo} alt=\"Mesto. Russia\" />\n      <div className={`${loggedIn ? 'header__container' : 'header__container_hidden'}`}>\n        <p className='header__user'>{headerUser}</p>\n        <p className='header__exit' onClick={signOut}>Выйти</p>\n      </div>            \n      <Link to={`${headerName === 'Регистрация' ? '/sign-up' : '/sign-in'}`} \n        className={`${loggedIn ? 'header__container_hidden' : 'header__title'}`}>{headerName}</Link>\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\nimport Card from './Card';\nimport Header from './Header';\nimport Footer from './Footer';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({ cards, onCardClick, onCardLike, onCardDelete, onEditAvatar, onEditProfile, onAddPlace, ...props }) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n      <Header \n        headerUser={props.userData} \n        loggedIn={props.loggedIn} \n        signOut={props.signOut} \n      />\n      <main className=\"content\">\n        <section className=\"profile\">\n          <div className=\"profile__avatar-container\">\n            <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар пользователя\" />\n          </div>\n          <button\n            className=\"profile__avatar-button\"\n            type=\"button\"\n            onClick={onEditAvatar}\n          />\n          <div className=\"profile__info\">\n            <div className=\"profile__button-wrapper\">\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\n              <button\n                className=\"profile__edit-button\"\n                type=\"button\"\n                onClick={onEditProfile}\n              />\n            </div>\n            <p className=\"profile__about\">{currentUser.about}</p>\n          </div>\n          <button\n            className=\"profile__add-button\"\n            type=\"button\"\n            onClick={onAddPlace}\n          />\n        </section>\n        <section className=\"photo-grid\">\n          {cards.map(({_id, link, name, owner, likes}) => \n              <Card \n                key={_id} _id={_id} link={link} name={name} owner={owner} likes={likes}\n                onCardClick={onCardClick} \n                onCardLike={onCardLike} \n                onCardDelete={onCardDelete} \n              />\n            )\n          }\n        </section>\n      </main>\n      <Footer />\n    </>\n  )\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction ImagePopup({cardTitle, cardSrc, isOpen, onClose}) {\n  return (\n    <div id=\"image-form\" className={`popup ${isOpen && 'popup_open'}`}>\n      <figure className=\"popup__container popup__container_img\">\n        <img className=\"popup__image\" src={cardSrc} alt={`${cardTitle}`} />\n        <figcaption className=\"popup__figcaption\">{`${cardTitle}`}</figcaption>\n        <button\n          id=\"image-expander_close-button\"\n          className=\"popup__close-button\"\n          type=\"reset\"\n          onClick={onClose}\n        />\n      </figure>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor({ baseUrl, token}) {\n    this._baseUrl = baseUrl;\n    this._token = token;\n  }\n\n  _handleResponse(res) {\n    if(res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  addCard({ name, link, alt }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        link,\n        alt\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  removeCard(cardID) {\n    return fetch(`${this._baseUrl}/cards/${cardID}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  setUserInfo({ name, about }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  setUserAvatar({ avatar }) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n  changeLikeCardStatus(cardID, like) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n      method: like ? 'PUT' : 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(this._handleResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\n  token: '05e19680-152e-4468-99ab-dd133195a5d0'\n})\n\nexport default api;\n","import React from 'react';\n\nfunction PopupWithForm({name, title, isOpen, onClose, onSubmit, buttonTitle, isLoading, ...props}) {\n  return (\n    <div id={`${name}-form`} className={`popup ${isOpen && 'popup_open'}`}>\n      <form id={`${name}-form_container`} className=\"popup__container\" onSubmit={onSubmit} noValidate>\n        <h2 className=\"popup__header\">{title}</h2>\n        {props.children}\n        <button className=\"popup__submit-button\" type=\"submit\">{isLoading === true ? 'Загрузка...' : buttonTitle}</button>\n        <button\n          className=\"popup__close-button\"\n          type=\"reset\"\n          onClick={onClose}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default PopupWithForm;\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isLoading }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(name, description);\r\n  }\r\n  \r\n  function handleChange(e) {\r\n    e.target.name === 'userName' ? setName(e.target.value) : setDescription(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      buttonTitle=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={isLoading}\r\n    >\r\n      <input id=\"user-input\" className=\"popup__input popup__input_type_user-name\"\r\n        name=\"userName\" type=\"text\" minLength=\"2\" maxLength=\"40\" pattern=\"[a-zA-Zа-яА-Я -]{1,}\"\r\n        placeholder=\"Имя\" defaultValue={name} onChange={handleChange} required />\r\n      <span id=\"user-input-error\" className=\"popup__input-error\"></span>\r\n      <input id=\"about-input\" className=\"popup__input popup__input_type_user-about\"\r\n        name=\"userAbout\" type=\"text\" minLength=\"2\" maxLength=\"200\" \r\n        placeholder=\"О себе\" defaultValue={description} onChange={handleChange} required />\r\n      <span id=\"about-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n    const avatarRef = React.useRef();\r\n\r\n    React.useEffect(() => {\r\n      avatarRef.current.value = '';\r\n    }, [isOpen])\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar(avatarRef.current.value);\r\n    }\r\n\r\n    return (\r\n      <PopupWithForm\r\n        name=\"avatar\"\r\n        title=\"Обновить аватар\"\r\n        buttonTitle=\"Сохранить\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}\r\n        isLoading={isLoading}\r\n      >\r\n        <input id=\"avatar-input\" className=\"popup__input popup__input_type_image-link\"\r\n            name=\"userAvatar\" type=\"url\" placeholder=\"Ссылка на изображение\" ref={avatarRef} required />\r\n        <span id=\"avatar-input-error\" className=\"popup__input-error\"></span>\r\n      </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isLoading }) {\r\n  const [title, setTitle] = React.useState('');\r\n  const [src, setSrc] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setTitle('');\r\n    setSrc('');\r\n  }, [isOpen])\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(title, src);\r\n  }\r\n\r\n  function handleTitleChange(e) {\r\n    setTitle(e.target.value);\r\n  }\r\n\r\n  function handleSrcChange(e) {\r\n    setSrc(e.target.value);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add\"\r\n      title=\"Новое место\"\r\n      buttonTitle=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={isLoading}\r\n    >\r\n      <input id=\"name-input\" className=\"popup__input popup__input_type_place-name\"\r\n            name=\"cardName\" type=\"text\" minLength=\"1\" maxLength=\"30\"placeholder=\"Название\" \r\n            value={title} onChange={handleTitleChange} required />\r\n      <span id=\"name-input-error\" className=\"popup__input-error\"></span>\r\n      <input id=\"link-input\" className=\"popup__input popup__input_type_image-link\"\r\n            name=\"cardLink\" type=\"url\" placeholder=\"Ссылка на изображение\" \r\n            value={src} onChange={handleSrcChange} required />\r\n      <span id=\"link-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction InfoTooltip({ isOpen, onClose, text, icon }) {\r\n  return (\r\n    <div id=\"image-form\" className={`popup ${isOpen && 'popup_open'}`}>\r\n      <div className='popup__container'>\r\n        <button\r\n          id=\"image-expander_close-button\"\r\n          className=\"popup__close-button\"\r\n          type=\"reset\"\r\n          onClick={onClose}\r\n        />\r\n        <div className='auth-tooltip'>\r\n          <img alt='icon' src={icon} />\r\n          <p className='auth-tooltip__text'>{text}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\n\r\nexport default function Login({ handleLogin }) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const handleChange = (evt) => {\r\n    evt.target.name === 'Email' ? setEmail(evt.target.value) : setPassword(evt.target.value);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEmail('');\r\n    setPassword('');\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    if (!email || !password) {\r\n      console.log('Необходимо заполнить все поля');\r\n      return;\r\n    }\r\n\r\n    handleLogin(email, password);\r\n    resetForm();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header headerName='Регистрация' />\r\n      <div className='auth-section'>\r\n        <h2 className='auth-section__title'>Вход</h2>\r\n        <form className='auth-section__form' onSubmit={handleSubmit} noValidate>\r\n          <input type='email' className='auth-section__input' placeholder='Email' value={email} name='Email' onChange={handleChange}></input>\r\n          <input type='password' className='auth-section__input' placeholder='Password' value={password} name='Password' onChange={handleChange}></input>\r\n          <button type='submit' className='auth-section__button'>Войти</button>\r\n        </form>\r\n        <p className='auth-section__text'>Еще не зарегистрированы?<Link to='/sign-up' className='auth-section__link'>&nbsp;Регистрация</Link></p>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  )\r\n}","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\n\r\nconst Register = ({ handleRegister }) => {\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  const handleChange = (evt) => {\r\n    evt.target.name === 'Email' ? setEmail(evt.target.value) : setPassword(evt.target.value);\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setEmail('');\r\n    setPassword('');\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    if (!email || !password) {\r\n      console.log('Необходимо заполнить все поля');\r\n      return;\r\n    }\r\n\r\n    handleRegister(email, password)\r\n    resetForm();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header headerName='Войти' />\r\n      <section className='auth-section'>\r\n        <h2 className='auth-section__title'>Регистрация</h2>\r\n        <form className='auth-section__form' onSubmit={handleSubmit} noValidate>\r\n          <input type='email' className='auth-section__input' placeholder='Email' value={email} name='Email' onChange={handleChange}></input>\r\n          <input type='password' className='auth-section__input' placeholder='Password' value={password} name='Password' onChange={handleChange}></input>\r\n          <button type='submit' className='auth-section__button'>Зарегистрироваться</button>\r\n        </form>\r\n        <p className='auth-section__text'>Уже зарегистрированы?<Link to='/sign-in' className='auth-section__link'>&nbsp;Войти</Link></p>\r\n      </section>\r\n      <Footer />\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to='./sign-in' />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) return res.json();\r\n      else return Promise.reject(res.statusText);\r\n    });\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) return res.json();\r\n      else return Promise.reject(res.statusText);\r\n    })\r\n    .then((data) => {\r\n      if (data.token) {\r\n        localStorage.setItem('token', data.token);\r\n        return data;\r\n      }\r\n    });\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    }\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) return res.json();\r\n      else return Promise.reject(res.status);\r\n    })\r\n    .then((data) => data);\r\n};","import React from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport InfoTooltip from './InfoTooltip';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as auth from '../utils/auth';\nimport SuccessIcon from '../images/success-icon.svg';\nimport FailIcon from '../images/fail-icon.svg';\n\nfunction App() {\n  const history = useHistory();\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({ isOpen: false });\n  const [currentUser, setCurrentUser] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userData, setUserData] = React.useState('');\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [InfoTooltipContents, setInfoTooltipContents] = React.useState({});\n\n  React.useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([dataUser, dataCards]) => {\n        setCurrentUser(dataUser);\n        setCards(dataCards);\n      })\n      .catch((err) => console.error(`Ошибка при загрузке данных: ${err}`));\n  }, [])\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  // Развернуть картинку\n  function handleCardClick(card) {\n    setSelectedCard({ isOpen: true, src: card.link, title: card.name });\n  }\n\n  // Добавить/убрать лайк карточки \n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then(newCard => {\n        const newCards = cards.map(c => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((err) => console.error(`Ошибка при обновлении лайка: ${err}`));\n  }\n\n  // Удалить карточку\n  function handleCardDelete(card) {\n    api.removeCard(card._id)\n      .then(() => {\n        setCards(cards.filter(c => c._id !== card._id));\n      })\n      .catch((err) => console.error(`Ошибка при удалении карточки: ${err}`))\n  }\n\n  // Добавить карточку\n  function handleAddPlaceSubmit(title, src) {\n    setIsLoading(true);\n    api.addCard({ name: title, link: src, alt: title })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(`Ошибка при добавлении карточки: ${err}`))\n  }\n\n  // Обновить данные пользователя\n  function handleUpdateUser(name, description) {\n    setIsLoading(true);\n    api.setUserInfo({ name: name, about: description })\n      .then(dataUser => {\n        setCurrentUser(dataUser);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(`Ошибка при обновлении данных: ${err}`))\n  }\n\n  // Обновить аватар пользователя\n  function handleUpdateAvatar(avatar) {\n    setIsLoading(true);\n    api.setUserAvatar({ avatar: avatar })\n      .then(dataAvatar => {\n        setCurrentUser(dataAvatar);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(`Ошибка при обновлении аватара: ${err}`))\n  }\n\n  // Закрыть модальное окно\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setSelectedCard({ isOpen: false });\n    setIsInfoTooltipOpen(false);\n    setIsLoading(false);\n  }\n\n  function tokenCheck() {\n    let token = localStorage.getItem('token');\n    if (token) {\n      auth.getContent(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            setUserData(res.data.email);\n            history.push('/');\n          } else {\n            setInfoTooltipContents({ message: 'Что-то пошло не так! Попробуйте ещё раз.', icon: FailIcon });\n            onInfoTooltip();\n          }\n        })\n        .catch(err => console.log(err));\n    }\n  }\n\n  React.useEffect(() => {\n    tokenCheck();\n    // eslint-disable-next-line\n  }, []);\n\n  function handleRegister(email, password) {\n    auth.register(escape(email), escape(password))\n      .then(() => {\n        setInfoTooltipContents({ message: 'Вы успешно зарегистрировались!', icon: SuccessIcon });\n        history.push('/sign-in');\n      })\n      .catch((err) => setInfoTooltipContents({ message: `Что-то пошло не так! Попробуйте ещё раз. (${err})`, icon: FailIcon }));\n\n    onInfoTooltip();\n  }\n\n  function handleLogin(email, password) {\n    auth.authorize(escape(email), escape(password))\n      .then((data) => {\n\n        auth.getContent(data.token)\n          .then((res) => {\n            setUserData(res.data.email);\n          })\n          .catch((err) => setInfoTooltipContents({ message: `Что-то пошло не так! Попробуйте ещё раз. (${err})`, icon: FailIcon }));\n\n        setInfoTooltipContents({ message: 'Вы успешно вошли!', icon: SuccessIcon });\n        setLoggedIn(true);\n        history.push('/');\n      })\n      .catch((err) => setInfoTooltipContents({ message: `Что-то пошло не так! Попробуйте ещё раз. (${err})`, icon: FailIcon }));\n\n    onInfoTooltip();\n  }\n\n  function signOut() {\n    setLoggedIn(false);\n    setUserData('');\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n  }\n\n  function onInfoTooltip() {\n    setIsInfoTooltipOpen(true);\n  }\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"page__content\">\n          <Switch>\n            <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Main}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n              cards={cards}\n              userData={userData}\n              signOut={signOut}\n            />\n            <Route path='/sign-up'>\n              <Register handleRegister={handleRegister} />\n            </Route>\n            <Route path='/sign-in'>\n              <Login handleLogin={handleLogin} />\n            </Route>\n            <Route>\n              {<Redirect to={`${loggedIn ? '/' : '/sign-in'}`} />}\n            </Route>\n          </Switch>\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n            isLoading={isLoading}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n            isLoading={isLoading}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n            isLoading={isLoading}\n          />\n          <ImagePopup\n            cardSrc={selectedCard.src}\n            cardTitle={selectedCard.title}\n            isOpen={selectedCard.isOpen}\n            onClose={closeAllPopups}\n          />\n          <InfoTooltip\n            isOpen={isInfoTooltipOpen}\n            onClose={closeAllPopups}\n            text={InfoTooltipContents.message}\n            icon={InfoTooltipContents.icon} />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}